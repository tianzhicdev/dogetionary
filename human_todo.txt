in the onboarding journey, if user is studying english, we add one more question
"are you studying for " menu with TOEFL/IELTS/NONE

we recommend the user to register but users can skip
if user select an active test, we should generate a schedule and display progress
"prepare for my test" on landing -> "practice"
display definition for new word in practice; perhaps with some special effects
"review" -> "practice"



let's design a teacher's portal
1. students can add an id in settings to join a group
2. teachers can access a web app /teacher-admin to view students stats
in /teacher-admin
we should all the groups
when click into a group, we show all the students and their stats
such as total saved words, total review count, 
when click into a student, we can see more details such as 
1. number of words saved in the last 7 days (show count for each day)
2. number of words reviewed in the last 7 days (show count for each day)
3. most recent saved 10 words 
4. more recent reviedwed 10 words


we need to think about gamified app wholistically. 
target users: highly motivated individuals who want to take tests/ build vocabulary for work/ 
what is the best way to learn a language? 1. repetition and  2.use
strategically, we should make an app that focus on building vocabulary.
"<APP NAME>: vocabulary for ielts"

1. onboarding

optional: 
ask intention, nickname, age
registration

english level tests

essential:
ask days/commitment time;


2. Sections:

essential:

a. Progress & Lookup

c. Schedule

d. Settings

optional
e. leaderboard


tasks:

1. create landing page that shows progress and lookup option

2. generate schedule

assume X words need to be learned;
every day we add Y new words to be learned;

for each new word, we assume that they need to practiced at Z0, Z1, Z2... days;
get_schedule(past_schedule: [(datetime, true/false), (datetime, true/false)]): future_schedule [(datetime, true/false), (datetime, true/false)]
# this func should use existing get_next_review_date_new to calc 7 future review dates assuming that the user always get it right when reviewing the word in the future 

initiate_schedule(test_name, study_duration): {date: {new_words: [], practice: []}... date2:{} ... }
# here daily new words = (test total words)/study_duration
# we should exclude words that are not new from being added as new (exclude words from saved_words table)
# but the non-new words that are part of the test vocabulary should be added the schedule as practice words;

we need a database strucuture to store the schedule; 
we should be able to call initiate_schedule every day (or any time really) to refresh the schedule so we always take into account new events from the user, such as study_duration change, reviewed words that are supposed to be reviewed in the future (so the next review time should be delayed);
multi selections 

1. the LLM calls need to be faster

3. words search in saved words.
3.1 let's define the word progress bar number logic: if a word most recent reivew count >= 7 times with no error in the past 84 dqys, it is 7. >= 6 times in the past 41 days, return 6;  >= 5 times in the past 22 days, return 5;   >= 4 times in the past 12 days, return 4;   >= 3 times in the past 6 days, return 3;   >= 5 times in the past 41 days, return 6;   >= 2 times in the past 3 days, return 2;  >= 1 times, return 1
5. remove recogition in practice mode, if user select wrong, we should show what is correct. regardless if user select right or wrong, we should show a pop-up window with the showing the definition view of the word, with a "next" button at the buttom to practice the next word 
4.1 practice naming

2. when it is done, show badges for when 5, 10, 50, 100, 200.... ALL words learnt;
https://www.figma.com/design/NzE6vNDdbpeafseWzGR71c/Badges-and-Awards--Community-?node-id=0-1&p=f&t=Go42SXoQ8mz88bwB-0

we should add a AchievementView where we show some badges according to the number of saved words
10 words 
30 words 
50 words 
100 words 
150 words 
200 words 
250 words 
300 words 
350 words 
400 words 
450 words 
500 words -> award 
600 words
700 words
... 
1000 words -> big award 
1500 -> bigger award
2000 -> biggest award

we should use sf symbols to keep it simple
AchievementView should be displayed on the top of the dictionary tab
please design first

1.1 onboarding should show the schedule.
1. progress bar, when it opens, show show more meaningful stats. 
1. strike, badges

4. practice mode

1. badge system

let's change how the badge system work; we move from saved_words based to number of reviews based; do not change the icons and everything. make the number to get the badge to be 10x the current number; (because reviews are easier)
let's call it score (score = number of reviews where failed review = 1, success review = 2) 
it it should be displayed on the top of practice mode always, every time user completes a review, we should add to the score, making a little animition when the score changes;
the score does not have to sync back to the db, becuase it can always get calculated from reviews; we only need to sync from backend when user lands on a page where the score needs to be displayed;
let's design first, mention updates in backend/ui and db (if any);


2. practice mode interface 
in the practice tab; lets redefign the UI:
we allow users to refresh to get today's schedule:
it should know the number of new words, the number of due words; and number of words that have not been reivewed in the past 24 hours, and score;
perhaps we need a /v3/practice-status 

on the top we should show a status bar: we display only # new words, # of due words and score;
if  # new words, # of due words  are both 0; in the status bar we also display "Congrats! Today's learning practice is complete!" 

if # new words, # of due words # of words that have not been reivewed in the past 24 hours are all 0; 
we show "You've done so well, there is nothing to practice!"

if any of the above is not 0, we just call /v3/next-review-word-with-new-words which automatically prioritize new words > due words > other words that have not ben reviewed in the past 24H;

in other words, when user switch to practice tab, if there is something to practice, he see the question right away, not needing to click "start" button;
when there is not anything to practice, he sees "You've done so well, there is nothing to practice!"
let's design this first;


performance: 
it is quite slow for loading the next question; let's do the following
create endpint v3/next-review-word-with-new-words/<count>
when user first come to practice mode, we should load just 3 questions;
but on the backgroud we should make sure that we have at least 10 questions in a queue;
when a user answers one question, we should refill the queue in ios mem so that we always have 10 questions (or less if user do not have more than 10 to practice anyway);
the in mem queue should be unique and ordered 
we should show the queue in real time on the screen in debug mode;
let's discuss first: how do we ensure order and dedupe? (if we have 3 in the in mem queue and we ask backend for 10 more, likely the 3 in mem are returned too);

a. schedule should be made deterministically with deterministic order b.in practice mode, practicable words are basically words scheduled for today and words that are not due but not have been reviewed in the past 24h, we should call it "not-due-yet" words;
b. to keep the logic simple, v3/next-review-words-batch should be today's words from schedule + "not-due-yet" words;


-- done --



2. animation for badge

in leaderboard mode, we should use score instead of practice count; let's create a new endpoint for this so older version of the app can still work;


2.1 in the saved words list view, we should 1. make the list more compact, we should try to fix the word itself and the review counts on the same row, only overflow to the second row if the word is too long;
2.the 7 blocks bar is kind ugly, can we user something better to indicate the progress?


4. some questions pronunciations are erroneous, we need a reporting/fixing mechanism;

 
5. review word count should include new words.  


6. changing schedule affect streak

3. toefl ielts words

7. reminder time set









